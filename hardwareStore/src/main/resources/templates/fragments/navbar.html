<nav th:fragment="navbar" class="sb-topnav navbar navbar-expand-lg navbar-dark bg-dark"
     xmlns:th="http://www.w3.org/1999/xhtml"
     xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <div class="container-fluid d-flex justify-content-between align-items-center">

        <!-- Texto de bienvenida -->
        <div class="text-white fw-bold">
            <h2 class="mb-0 text-white" style="margin-left: 220px;">Bienvenid@s a ForgeMax</h2>
        </div>

        <!-- Menú usuario -->
        <ul class="navbar-nav ms-auto me-3 me-lg-4">
            <li class="nav-item dropdown" sec:authorize="isAuthenticated()">
                <a class="nav-link dropdown-toggle text-white" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-user fa-fw me-1"></i>
                    <span th:text="${currentUser != null ? currentUser.name + ' (' + currentUser.roleName + ')' : 'Usuario'}">Usuario</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                        <a class="dropdown-item" href="/profile">
                            <i class="fas fa-user-circle me-2"></i>Perfil
                        </a>
                    </li>
                    
                    <li><hr class="dropdown-divider"/></li>
                    <li>
                        <a class="dropdown-item" href="#" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                            <i class="fas fa-sign-out-alt me-2"></i>Cerrar sesión
                        </a>
                        <form id="logout-form" th:action="@{/logout}" method="post" style="display: none;">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" th:if="${_csrf}"/>
                        </form>
                    </li>
                </ul>
            </li>
        </ul>

    </div>
</nav>