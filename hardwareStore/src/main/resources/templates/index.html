<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('Dashboard')}"></head>

<body class="sb-nav-fixed">
<div th:replace="~{fragments/navbar :: navbar}"></div>

<div id="layoutSidenav">
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid px-4">
                <h1 class="mt-4">Dashboard</h1>
                <ol class="breadcrumb mb-4">
                    <li class="breadcrumb-item active">Resumen de Ventas y Productos</li>
                </ol>

                <div class="row">
                    <div class="col-xl-4 col-md-6">
                        <div class="card bg-primary text-white mb-4">
                            <div class="card-body">
                                <div class="fs-4">Ventas del DÃ­a</div>
                                <div class="fs-2 fw-bold" th:text="'$' + ${#numbers.formatInteger(dailySales ?: 0, 0, 'POINT')}">
                                    $0
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-md-6">
                        <div class="card bg-warning text-dark mb-4">
                            <div class="card-body">
                                <div class="fs-4">Ventas de la Semana</div>
                                <div class="fs-2 fw-bold" th:text="'$' + ${#numbers.formatInteger(weeklySales ?: 0, 0, 'POINT')}">
                                    $0
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-md-6">
                        <div class="card bg-success text-white mb-4">
                            <div class="card-body">
                                <div class="fs-4">Ventas del Mes</div>
                                <div class="fs-2 fw-bold" th:text="'$' + ${#numbers.formatInteger(monthlySales ?: 0, 0, 'POINT')}">
                                    $0
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-header"><i class="fas fa-star me-1"></i>Top 5 Productos Vendidos</div>
                            <div class="card-body">
                                <ol class="list-group list-group-numbered">
                                    <li th:each="product : ${topProducts}" class="list-group-item d-flex justify-content-between align-items-start">
                                        <div class="ms-2 me-auto">
                                            <div class="fw-bold" th:text="${product.get('name')}">Nombre Producto</div>
                                        </div>
                                        <span class="badge bg-primary rounded-pill" th:text="${product.get('quantity')} + ' uds'">14</span>
                                    </li>
                                </ol>
                                <div th:if="${#lists.isEmpty(topProducts)}" class="text-center text-muted">
                                    No hay datos de productos vendidos.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-header"><i class="fas fa-triangle-exclamation me-1"></i>Productos con Stock Bajo</div>
                            <div class="card-body">
                                <ul class="list-group">
                                    <li th:each="product : ${lowStockProducts}" class="list-group-item d-flex justify-content-between align-items-center">
                                        <span th:text="${product.name}">Nombre Producto</span>
                                        <span class="badge bg-danger rounded-pill" th:text="'Stock: ' + ${product.stock}">Stock: 5</span>
                                    </li>
                                </ul>
                                <div th:if="${#lists.isEmpty(lowStockProducts)}" class="text-center text-muted">
                                    No hay productos con stock bajo.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-header"><i class="fas fa-users me-1"></i>Top 5 Clientes Frecuentes</div>
                            <div class="card-body">
                                <ol class="list-group list-group-numbered">
                                    <li th:each="customer : ${topCustomers}" class="list-group-item d-flex justify-content-between align-items-start">
                                        <div class="ms-2 me-auto">
                                            <div class="fw-bold" th:text="${customer.get('clientName')}">Nombre Cliente</div>
                                            <span th:text="'Total: $' + ${#numbers.formatInteger(customer.get('total'), 0, 'POINT')}">Total: $0</span>
                                        </div>
                                    </li>
                                </ol>
                                <div th:if="${#lists.isEmpty(topCustomers)}" class="text-center text-muted">
                                    No hay datos de clientes.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>

        <footer th:replace="~{fragments/footer :: footer}"></footer>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/scripts.js}"></script>

</body>
</html>